{% extends 'base.html' %}
{% load static %}
{% block title %}
    chatpage - {{ block.super }}
{% endblock %}
{% block navigation %}
    <a class="nav-item nav-link {% if request.path == '/' %}active{% endif %}" href="{% url 'home' %}">HOME</a>
{% endblock %}

{% block content %}
<div style="background-image: url('{% static "image/BackgroundMain.png" %}');" class = "chatpage">
    <div class="chatpage_container">
        <div class="chat_container">
            <div class="conversation" id="chatbot">
             {% comment %} conversation {% endcomment %}
            </div>
            <div class="chatbox">
                <div class="prompt">
                    {% csrf_token %}
                    <input type="text" id="userInput" name="userMessage" placeholder="Type your message here...">
                    <button id="sendBtn">
                        <img src="{% static 'image/send.png' %}" alt="Logo" id="sendIcon">
                    </button>
                </div>
            </div>
        </div>
    </div>
</div> 
<script>
    function getUserResponse(){
        var usertext = $('#userInput').val();
        var userHTML = "<p class='usertext'> User: <span>"+usertext+"</span></p>";
        $('#userInput').val("");
        $('#chatbot').append(userHTML);
        $.get('/myapp/getResponse',{userMessage:usertext}).done(function(data){
            var returnedmessage = "<p class='botText'> Motibot: <span>"+data+"</span></p>";
            $('#chatbot').append(returnedmessage);
        })
    }
    $('#sendBtn').click(function(){
        getUserResponse();
    })
    $('#userInput').keypress(function (event) {
        if (event.which === 13) {
            event.preventDefault();
            $('#sendBtn').click();
        }
    });
</script>
{% endblock %}
